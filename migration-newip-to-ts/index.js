(()=>{"use strict";var e={659:(e,t,s)=>{s.r(t)},798:(e,t,s)=>{s(659),t.Z=class{draw(e){const t=e.length>=10?e.slice(0,10):e,s=document.createDocumentFragment(),r=document.querySelector("#newsItemTemp");r&&t.forEach(((e,t)=>{const o=r.content.cloneNode(!0);t%2&&this.setClass(o,".news__item","alt"),this.setStyle(o,".news__meta-photo","backgroundImage",`url(${e.urlToImage||"img/news_placeholder.jpg"})`),this.setTextContent(o,".news__meta-author",e.author||e.source.name),this.setTextContent(o,".news__meta-date",e.publishedAt.slice(0,10).split("-").reverse().join("-")),this.setTextContent(o,".news__description-title",e.title),this.setTextContent(o,".news__description-source",e.source.name),this.setTextContent(o,".news__description-content",e.description),this.setAttribute(o,".news__read-more a","href",e.url),s.append(o)}));const o=document.querySelector(".news");o&&(o.innerHTML="",o.appendChild(s))}setClass(e,t,s){const r=e.querySelector(t);r&&r.classList.add(s)}setTextContent(e,t,s){const r=e.querySelector(t);r&&(r.textContent=s)}setAttribute(e,t,s,r){const o=e.querySelector(t);o&&o.setAttribute(s,r)}setStyle(e,t,s,r){const o=e.querySelector(t);o&&(o.style.backgroundImage=r)}}}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,s),n.exports}s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=s(798);class t{constructor(){this.news=new e.Z,this.sources=new class{draw(e){const t=document.createDocumentFragment(),s=document.querySelector("#sourceItemTemp");e.forEach((e=>{const r=s.content.cloneNode(!0);r.querySelector(".source__item-name").textContent=e.name,r.querySelector(".source__item").setAttribute("data-source-id",e.id),t.append(r)})),document.querySelector(".sources").append(t)}}}drawNews(e){const t=e?.articles?e?.articles:[];this.news.draw(t)}drawSources(e){const t=e?.sources?e?.sources:[];this.sources.draw(t)}}(new class{constructor(){this.controller=new class extends class extends class{constructor(e,t){this.baseLink=e,this.options=t}getResp({endpoint:e,options:t={}},s=(()=>{console.error("No callback for GET response")})){this.load("GET",e,s,t)}errorHandler(e){if(!e.ok)throw 401!==e.status&&404!==e.status||console.log(`Sorry, but there is ${e.status} error: ${e.statusText}`),Error(e.statusText);return e}makeUrl(e,t){const s={...this.options,...e};let r=`${this.baseLink}${t}?`;return Object.keys(s).forEach((e=>{r+=`${e}=${s[e]}&`})),r.slice(0,-1)}load(e,t,s,r={}){fetch(this.makeUrl(r,t),{method:e}).then(this.errorHandler).then((e=>e.json())).then((e=>s(e))).catch((e=>console.error(e)))}}{constructor(){super("https://newsapi.org/v2/",{apiKey:"bb7027a1d0dc48e488ca04d0ca500a70"})}}{getSources(e){super.getResp({endpoint:"sources"},e)}getNews(e,t){let s=e.target;const r=e.currentTarget;for(;s!==r;){if(s.classList.contains("source__item")){const e=s.getAttribute("data-source-id");return void(r.getAttribute("data-source")!==e&&(r.setAttribute("data-source",e),super.getResp({endpoint:"everything",options:{sources:e}},t)))}s=s.parentNode}}},this.view=new t}start(){document.querySelector(".sources").addEventListener("click",(e=>this.controller.getNews(e,(e=>this.view.drawNews(e))))),this.controller.getSources((e=>this.view.drawSources(e)))}}).start()})()})();